---
title: PUF
created: 2022-09-04 14:24:25
updated: 2022-09-04 15:18:56
tags: 
- atom
---
# PUF

## 特点

- 唯一性：每一个芯片都是随机分布的、唯一的。
- 防克隆性：芯片本身就是在芯片制造过程中由于不确定因素提取出来的，无法重新复制相同的PUF值。误差本就是不可控因素，因此不能逆向去生成指定的“误差”。
- 不可预测性：由于芯片在制造出来之前，没有办法来预测。
- 防篡改性：芯片本身PUF值无法定位修改。
- 无需存储：每次芯片启动只需要在电路结构中提取，无需存储器件来存储。

## 实现分类

![[z-oblib/z2-attachments/Pasted image 20220904144719.png]]

- SRAM PUF
	SRAM PUF利用[[3-计算机科学/1-计算机硬件/0-基础元器件/SRAM|SRAM]] Cell，首尾相接的反相器，在制造过程中，虽然电路架构完全一样，但是电路驱动能力有强弱之分，导致SRAM在上电时的Cell上0,1的分布是随机分布的，因此，利用这个特征可以提取出PUF
- 仲裁PUF
	仲裁PUF，同一个信号从起点到终点所用的时间（延迟），在制造过程中会存在误差。
- RO PUF（环形振荡器）
	环形振荡器PUF，利用环形振荡器电路，在不同芯片制造出来之后，频率产生也会存在误差
- VIA PUF
	实际设计中，VIA存在设计规则，利用设计规则，设计从小到大的孔洞，根据工艺的特性，来提取出VIA PUF

## SRAM实现

### 工作原理

> [[3-计算机科学/1-计算机硬件/0-基础元器件/锁存器|锁存器]]在初始无输入情况下，输出会因生成工业的不可控误差产生不同的初始输出值。

利用半导体物理生产过程中自然发生的深亚微米变化，并赋予每个[[3-计算机科学/1-计算机硬件/0-基础元器件/晶体管|晶体管]]轻微的随机的电特性。这些独特的特性构成了芯片独特身份的基础。

基于 SRAM 的 PUF 评估的是标准的 6T（6 个晶体管） SRAM 阵列的上电模式。阵列中的每个 SRAM 单元由两个理论和设计上匹配的 CMOS 反向器组成，它们是交叉耦合的（参见图 2）。但是在芯片制造时，由于在物理上无法控制的[[3-计算机科学/1-计算机硬件/0-基础元器件/CMOS|CMOS]] 工艺引入深亚微米变化，使每个晶体管具有略带随机的电气特性。 SRAM 单元的上电状态主要取决于 PMOS 晶体管 P1 和 P2 的阈值电压 （Vth） 之间的差异。 例如，考虑随机变化导致|Vth,P1|小于|Vth,P2|。 因此，在通电（Vdd 上升）阶段 P1 将在 P2 之前开始导通，导致 A 在逻辑上处于高位，并阻止 P2 打开。 因此，单元的上电状态为 A=1。Vth,P1和Vth,P2之间的不匹配越大，单元的上电优先权越强，因此通电后是另一个状态的概率越小。

![[z-oblib/z2-attachments/Pasted image 20220904145457.png]]

SRAM PUF基于任何数字芯片中都可以使用的标准 SRAM 存储器的行为。每次SRAM供电时，由于晶体管阈值电压的随机差异，每个SRAM单元都有自己的首选状态。因此，当SRAM存储器供电时，每一个单元都会产生一个独特且随机的0和1模式。这些模式就像芯片指纹，因为每个模式对于特定的SRAM都是唯一的，因此对于特定的芯片也是唯一的。


![[z-oblib/z2-attachments/Pasted image 20220904142722.png]]

### 噪声

但是，在 SRAM每次上电后，一些其中晶体管的驱动能力很平衡的单元，可能其初始值是0还是1是不固定的。 这部分单元的数量除以阵列中总单元的数量定义为 SRAM PUF 噪声。单元翻转主要受局部温差、局部电源电压变化和老化的影响。

Vth,P1≈Vth,P2的单元有较高的概率在每次上电时它们的输出值也相对前一次上电的输出值发生改变，因此，在SRAM的PUF响应中会导致相应SARM单元比特翻转或噪声（这也是本文中对“噪声”的定义）。 由于阈值电压对温度、供电电压、老化等因素敏感，SRAM PUF的噪声也会对这些不断变化的条件敏感。 



![[z-oblib/z2-attachments/Pasted image 20220904143849.png]]

### 针对噪声的纠错

> 影响因素和对策详细参考：[Intrinsic ID基于SRAM的PUF可靠性分析 (ip-soc.com)](https://www.ip-soc.com/jishu/36.html)

### 密钥提取

为了将有噪声的SRAM PUF的响应转换为可靠而且安全的设备唯一的密钥，使用了模糊提取器或辅助数据算法。这种算法实现两个处理步骤：i）纠错和 ii） 随机提取。

#### 纠错

为了说明纠错的概念，以一个非常小的、由一个字节组成的 SRAM PUF为例。SRAM PUF 响应可以看作是一个八位组成的位串。为了简单起见，我们从这个八位的SRAM PUF 中提取一个机密位 （1 或 0），该位对应于 1/8 的码率。本示例中使用的纠错码是长度为 8 的重复代码。这意味着机密位'0'将被编码为码字C0=(00000000)和秘密位'1'将被编码为码字C1=(11111111)。

![[z-oblib/z2-attachments/Pasted image 20220904145844.png]]

#TODO 

> [Intrinsic ID基于SRAM的PUF可靠性分析 (ip-soc.com)](https://www.ip-soc.com/jishu/36.html)



### 方案优势

与传统的非易失性内存(NVM)中的密钥存储相比，这种从SRAM属性中获取密钥的方式具有很大的安全优势。因为密钥不是永久存储的，所以当设备处于非活动状态时(在掉电状态时或者不需要使用密钥时，没有明文密钥)，密钥就不存在，因此攻击者无法打开设备并破坏其存储器内的内容。

### 如何将SRAM PUF用作信任根

设备，尤其是物联网的设备，需要密钥来保护其数据、IP 和操作。如果这些密钥的来源是可信的，并且密钥安全地存储在可以抵御攻击的硬件中，则它们将形成设备所谓的"信任根"。

这些密钥可以由设备制造商（也称为 OEM）自己配置到设备上，也可以由芯片供应商在更早的阶段提供。当芯片供应商提供预先配置的芯片时，这就增加了他们销售给 OEM 的产品的价值。如果 OEM 决定自己进行配置，他们通常会购买成本更低的芯片。

无论双方中哪一方负责提供加密密钥，执行这一任务都不是一件简单的事情。将密钥注入芯片需要值得信赖的工厂，这增加了生产过程的成本和复杂性，并限制了灵活性。这种复杂性可以通过在芯片内部创建密钥来避免，比如使用内部随机数生成器(RNG)或PUF。

