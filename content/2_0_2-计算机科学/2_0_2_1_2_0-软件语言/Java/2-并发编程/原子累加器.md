---
title: 原子累加器
created: 2022-06-01 17:11:21
updated: 2022-06-04 22:27:22
tags: 
- #atom
---

# 原子累加器

性能提升的原因很简单，就是在有竞争时，设置多个累加单元，Therad-0 累加 Cell[0]，而 Thread-1 累加Cell[1]... 最后将结果汇总。这样它们在累加时操作的不同的 Cell 变量，因此减少了 CAS 重试失败，从而提高性能。

累加单元不会超过cpu的核心数，核心数越多提升越明显。

## 源码分析

#TODO