---
title: 四次挥手
created: 2022-07-21 21:57:13
updated: 2022-09-18 22:16:13
tags: 
- atom
---

# 四次挥手

1. **我要走了**：客户端完成所有数据传输，向服务端发送一个FIN=1的终止连接报文，并设置序列号为传输数据的最后一个字节序号，发送后客户端进入FIN-Wait一阶段。
2. **知道了，最后一点东西给你打包带上，稍等**：服务端接收到终止连接报文，并返回给客户端一个ACK确认报文，此时客户端进入FIN-Wait二阶段，客户端无法再进行数据传输，然而服务端可能还存在没有发送给客户端的数据，因此不能立刻关闭连接。
3. **所有东西都在这里了，拿好**：服务端在发送完所有数据后，再发送一个ACK=1，FIN=1的终止确认给客户端，此时服务端进入LAST-ACK状态。
4. **好的，你忙吧2MSL不找我，我就自己走了**：客户端收到响应后，返回给服务端一个ACK=1的响应，并进入TIME-WAIT状态，等待时间为2MSL，即两倍的最大数据段传输时间。
